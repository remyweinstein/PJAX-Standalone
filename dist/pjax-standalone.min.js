(function(){var internal={firstrun:!0,is_supported:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),loaded_scripts:[]};if(!internal.is_supported){var pjax_shell={connect:function(){},submit:function(){},invoke:function(){var t=2===arguments.length?arguments[0]:arguments.url;document.location=t}};return void("function"==typeof define&&define.amd?define(function(){return pjax_shell}):window.pjax=pjax_shell)}internal.addEvent=function(t,e,n){t.addEventListener(e,n,!1)},internal.clone=function(t){var e={};for(var n in t)e[n]=t[n];return e},internal.triggerEvent=function(t,e,n){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),void 0!==n&&(r.data=n),t=internal.get_container_node(t),t.dispatchEvent(r)},internal.addEvent(window,"popstate",function(t){if(null!==t.state){var e={url:t.state.url,container:t.state.container,title:t.state.title,history:!1};if(void 0!==internal.options)for(var n in internal.options)void 0===e[n]&&(e[n]=internal.options[n]);var r=internal.parseOptions(e);if(!1===r)return;internal.handle(r)}}),internal.attach=function(t,e){if(t.protocol===document.location.protocol&&t.host===document.location.host&&!(t.pathname===location.pathname&&t.hash.length>0)){var n=["pdf","doc","docx","zip","rar","7z","gif","jpeg","jpg","png"];void 0===e.ignoreFileTypes&&(e.ignoreFileTypes=n),-1===e.ignoreFileTypes.indexOf(t.pathname.split(".").pop().toLowerCase())&&(e.url=t.href,t.getAttribute("data-pjax")&&(e.container=t.getAttribute("data-pjax")),t.getAttribute("data-title")&&(e.title=t.getAttribute("data-title")),!1!==(e=internal.parseOptions(e))&&internal.addEvent(t,"click",function(t){if(!(t.which>1||t.metaKey||t.ctrlKey)){if(t.preventDefault?t.preventDefault():t.returnValue=!1,document.location.href===e.url)return!1;internal.handle(e)}}))}},internal.parseLinks=function(t,e){var n;n=void 0!==e.useClass?t.getElementsByClassName(e.useClass):t.getElementsByTagName("a");for(var r,i=0;i<n.length;i++){var a=n[i];void 0!==e.excludeClass&&-1!==a.className.indexOf(e.excludeClass)||(r=internal.clone(e),r.history=!0,internal.attach(a,r))}if(internal.firstrun){for(var o=document.getElementsByTagName("script"),l=0;l<o.length;l++)o[l].src&&-1===internal.loaded_scripts.indexOf(o[l].src)&&internal.loaded_scripts.push(o[l].src);internal.triggerEvent(e.container,"ready")}},internal.attachForm=function(t,e){var n=["pdf","doc","docx","zip","rar","7z","gif","jpeg","jpg","png"];void 0===e.ignoreFileTypes&&(e.ignoreFileTypes=n),e.method=t.method,e.data=internal.serialize(t),e.url=t.action,"GET"!==e.method&&"get"!==e.method||(e.url+="?"+e.data),t.getAttribute("data-pjax")&&(e.container=t.getAttribute("data-pjax")),t.getAttribute("data-title")&&(e.title=t.getAttribute("data-title")),!1!==(e=internal.parseOptions(e))&&internal.addEvent(t,"submit",function(t){t.preventDefault(),t.preventDefault||(t.returnValue=!1),internal.handle(e)})},internal.parseForm=function(t,e){var n;if(n=internal.clone(e),n.history=!0,internal.attachForm(t,n),internal.firstrun){for(var r=document.getElementsByTagName("script"),i=0;i<r.length;i++)r[i].src&&-1===internal.loaded_scripts.indexOf(r[i].src)&&internal.loaded_scripts.push(r[i].src);internal.triggerEvent(e.container,"ready")}},internal.smartLoad=function(t,e){var n=t.getElementsByTagName("title")[0];n&&(document.title=n.innerHTML);var r=t.querySelector("#"+e.container.id);return null!==r?r:t},internal.updateContent=function(t,e){var n=document.createElement("div");if(n.innerHTML=t,e.smartLoad&&(n=internal.smartLoad(n,e)),void 0===e.title&&(e.title=document.title,!e.smartLoad)){var r=n.getElementsByTagName("title");0!==r.length&&(e.title=r[0].innerHTML)}return e.container.innerHTML=n.innerHTML,e.parseJS&&internal.runScripts(n),e},internal.runScripts=function(html){for(var scripts=html.getElementsByTagName("script"),sc=0;sc<scripts.length;sc++)if(scripts[sc].src&&-1===internal.loaded_scripts.indexOf(scripts[sc].src)){var s=document.createElement("script");s.src=scripts[sc].src,document.head.appendChild(s),internal.loaded_scripts.push(scripts[sc].src)}else eval(scripts[sc].innerHTML)},internal.handle=function(t){internal.triggerEvent(t.container,"beforeSend",t),internal.request(t,function(e){if(!1===e)return internal.triggerEvent(t.container,"complete",t),void internal.triggerEvent(t.container,"error",t);t=internal.updateContent(e,t),t.history&&(internal.firstrun&&(window.history.replaceState({url:document.location.href,container:t.container.id,title:document.title},document.title),internal.firstrun=!1),window.history.pushState({url:t.url,container:t.container.id,title:t.title},t.title,t.url)),t.parseLinksOnload&&internal.parseLinks(t.container,t),internal.triggerEvent(t.container,"complete",t),internal.triggerEvent(t.container,"success",t),t.autoAnalytics&&t.history&&(window._gaq&&_gaq.push(["_trackPageview"]),window.ga&&ga("send","pageview",{page:t.url,title:t.title})),document.title=t.title,t.returnToTop&&window.scrollTo(0,0)})},internal.request=function(t,e){var n;try{n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return void console.log("Unable to create XMLHTTP Request")}n.onreadystatechange=function(){4===n.readyState&&200===n.status?e(n.responseText):4!==n.readyState||404!==n.status&&500!==n.status||e(!1)},n.open(t.method,t.url+(/[?&]/.test(t.url)?"&_pjax":"?_pjax")+t.data,!0),n.setRequestHeader("X-PJAX","true"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(null)},internal.parseOptions=function(t){var e={history:!0,parseLinksOnload:!0,smartLoad:!0,autoAnalytics:!0,returnToTop:!0,parseJS:!1};if(void 0===t.url||void 0===t.container||null===t.container)return console.log("URL and Container must be provided."),!1;for(var n in e)void 0===t[n]&&(t[n]=e[n]);t.history=!1!==t.history,t.container=internal.get_container_node(t.container);var r=["ready","beforeSend","complete","error","success"];for(var i in r){var a=r[i];"function"==typeof t[a]&&internal.addEvent(t.container,a,t[a])}return t},internal.serialize=function(t){var e,n=t.querySelectorAll("input, select, textarea"),r={};for(e in n)n[e].tagName&&("checkbox"===n[e].type?n[e].checked&&(r[n[e].name]=n[e].value):r[n[e].name]=n[e].value);return Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")},internal.get_container_node=function(t){return"string"==typeof t&&null===(t=document.getElementById(t))?(console.log("Could not find container with id:"+t),!1):t},this.connect=function(){var t={};2===arguments.length&&(t.container=arguments[0],t.useClass=arguments[1]),t.method="GET",1===arguments.length&&("string"==typeof arguments[0]?t.container=arguments[0]:t=arguments[0]),delete t.title,delete t.history,internal.options=t,"complete"===document.readyState?internal.parseLinks(document,t):internal.addEvent(window,"load",function(){internal.parseLinks(document,t)})},this.submit=function(){var t={};if(2===arguments.length)var e=arguments[1],n=arguments[0];t.container=n,t.form=document.getElementById(e),delete t.title,delete t.history,internal.options=t,"complete"===document.readyState?internal.parseForm(t.form,t):internal.addEvent(window,"load",function(){internal.parseForm(t.form,t)})},this.invoke=function(){var t={};2===arguments.length?(t.url=arguments[0],t.container=arguments[1]):t=arguments[0],!1!==(t=internal.parseOptions(t))&&internal.handle(t)};var pjax_obj=this;"function"==typeof define&&define.amd?define(function(){return pjax_obj}):window.pjax=pjax_obj}).call({});